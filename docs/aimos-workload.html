<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Set up the workload environment &mdash; AiMOS 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Submit jobs" href="aimos-submit-job.html" />
    <link rel="prev" title="AiMOS Environment Basics" href="aimos-env-basics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> AiMOS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="aimos-basics.html">AiMOS Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="aimos-userid.html">Access to AiMOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="aimos-env-basics.html">AiMOS Environment Basics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Set up the workload environment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#load-additional-tools-and-libraries-via-module">Load additional tools and libraries via module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-anaconda">Install Anaconda</a></li>
<li class="toctree-l2"><a class="reference internal" href="#frequently-used-conda-commands">Frequently Used conda commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-new-conda-environment-for-your-workload">Create a new conda environment for your workload</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-wml-ce-a-k-a-powerai">Install WML-CE (a.k.a PowerAI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-open-ce">Install Open-CE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#open-ce-release-1-2-2">Open-CE Release 1.2.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-s-new">What’s new</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-open-ce-repository-and-frameworks">Installing the Open-CE Repository and Frameworks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uninstalling-the-open-ce-mldl-frameworks">Uninstalling the Open-CE MLDL frameworks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-jupyter-notebook">Install Jupyter notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#start-jupyter-notebook">Start Jupyter Notebook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#allocate-a-compute-node">Allocate a compute node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#start-jupyter-notebook-on-the-allocated-compute-node">Start Jupyter Notebook on the allocated compute node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#display-the-webgui-for-a-jupyter-notebook-via-tunneling">Display the WebGUI for a Jupyter notebook via Tunneling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ssh-tunnelling-on-a-linux-or-mac-osx-node">SSH tunnelling on a Linux or MAC OSX node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ssh-tunneling-via-putty-on-windows">SSH tunneling via PUTTY on Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#remote-port-forwarding-via-ssh-tunneling">Remote Port Forwarding via SSH Tunneling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aimos-submit-job.html">Submit jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="aimos-benchmark.html">AI Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="aimos-ai-hardware-toolkit.html">IBM Research AI Hardware Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="aimos-hints-tips.html">Hints and Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="aimos-getting-help.html">Getting Help?</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AiMOS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Set up the workload environment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/aimos-workload.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="set-up-the-workload-environment">
<span id="setup-workload-env"></span><h1>Set up the workload environment<a class="headerlink" href="#set-up-the-workload-environment" title="Permalink to this heading"></a></h1>
<p>The following sections describe various steps to set up the environment for your workload.  For example, install anaconda, create a conda environment for a specific workload, install jupyter notebook server, etc.</p>
<section id="load-additional-tools-and-libraries-via-module">
<span id="load-module"></span><h2>Load additional tools and libraries via module<a class="headerlink" href="#load-additional-tools-and-libraries-via-module" title="Permalink to this heading"></a></h2>
<p>In AiMOS environment, the available tools are not in your PATH by default. If you need additional development tool and libraries, you can use <strong>module</strong> to display what is available and load the required tools and libraries for your development and testing.</p>
<p>List the complete list of available modules and extenstions, use <strong>module spider</strong>.  For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span> <span class="o">[</span>BMHRkmkh@dcsfen01<span class="o">]</span>$ module spider

 -----------------------------------------------------------------------------------------------------------------------------------
 The following is a list of the modules and extensions currently available:
 -----------------------------------------------------------------------------------------------------------------------------------
  automake: automake/1.16.1
    Automake

  bazel: bazel/0.17.2/1, bazel/0.18.1/1, bazel/0.18.0/1, bazel/0.21.0/1
    Bazel build system

  ccache: ccache/3.5/1
    ccache compiler cache

  clang: clang/7.0.0/1
    LLVM + clang

  cmake: cmake/3.17.2
    CMake

  cuda: cuda/10.1, cuda/10.2
    NVIDIA CUDA

  fftw: fftw/3.3.8/1
    FFTW

  gcc: gcc/6.4.0/1, gcc/6.5.0/1, gcc/7.4.0/1, gcc/8.1.0/1, gcc/8.2.0/1, gcc/8.4.0/1
    GNU Compiler Collection <span class="o">(</span>gcc<span class="o">)</span>

  git: git/2.25.1
    git

  hdf5: hdf5/1.10.3/1
    HDF5

  hwloc: hwloc/2.0.2/1
    hwloc
--More--
</pre></div>
</div>
<p>For example, you want to load cmake module and spectrum_mpi module</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$ module load  cmake/3.14.6
<span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$ which cmake
<span class="nb">alias</span> <span class="nv">cmake</span><span class="o">=</span><span class="s1">&#39;cmake3&#39;</span>
        /usr/bin/cmake3
<span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$ which cmake3
/usr/bin/cmake3
<span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$ module load spectrum-mpi
<span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$ which mpirun
/opt/ibm/spectrum_mpi/bin/mpirun
</pre></div>
</div>
<p>For more information see <a class="reference external" href="https://docs.cci.rpi.edu/examples/Modules/">https://docs.cci.rpi.edu/examples/Modules/</a></p>
</section>
<section id="install-anaconda">
<span id="install-conda"></span><h2>Install Anaconda<a class="headerlink" href="#install-anaconda" title="Permalink to this heading"></a></h2>
<p>Anaconda is not installed by default on AiMOS at the system level.  If you need the conda environment for your workload, you will need to install and set it up in your environment.</p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>You must login to one of the front end nodes. Please note that you need to use the appropriate front end node depending on the hardware architecture.  For more information see <a class="reference internal" href="aimos-userid.html#how-to-login"><span class="std std-ref">Login to AiMOS</span></a></p></li>
<li><p>Proxy was set up. For how to see <a class="reference internal" href="aimos-env-basics.html#setup-environment"><span class="std std-ref">Initial Environment Setup</span></a>.</p></li>
</ul>
<p>Download the Anaconda or  Miniconda3 installer applicable for the hardware architecture, i.e. ppc64le for DCS cluster or X86_64 for NPL cluster, as needed.  For example:</p>
<ul class="simple">
<li><p>DCS Cluster:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-ppc64le.sh
</pre></div>
</div>
<ul class="simple">
<li><p>NPL Cluster:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
</pre></div>
</div>
<p>For more information see <a class="reference external" href="https://docs.cci.rpi.edu/software/Conda/">https://docs.cci.rpi.edu/software/Conda/</a></p>
<p><strong>IMPORTANT NOTE:</strong> the same GPFS filesystem is mounted on all the nodes in both DCS(Power) and NPL(X86) cluster.  You need to consider that if you include conda init in your ~/.bashrc as well as the .condarc.  You do not want things intended to run on Power running on X86 or vice versa. You may want to refer to <a class="reference internal" href="aimos-hints-tips.html#conda-init-bashrc"><span class="std std-ref">Conda Init in .bashrc</span></a> for example of setting up .bashrc to run the appropriate conda init for the environment.</p>
<p>This following example is to install the ppc64le miniconda environment to the scratch directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>BMHRkmkh@dcsfen01 ~<span class="o">]</span>$ bash Miniconda3-latest-Linux-ppc64le.sh -p ~/scratch/miniconda3

Welcome to Miniconda3 <span class="m">4</span>.7.12

In order to <span class="k">continue</span> the installation process, please review the license agreement.
Please, press ENTER to <span class="k">continue</span>
&gt;&gt;&gt;
...
Do you accept the license terms? <span class="o">[</span>yes<span class="p">|</span>no<span class="o">]</span>
<span class="o">[</span>no<span class="o">]</span> &gt;&gt;&gt; yes

Miniconda3 will now be installed into this location:
/gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

<span class="o">[</span>/gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3<span class="o">]</span> &gt;&gt;&gt;
<span class="nv">PREFIX</span><span class="o">=</span>/gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3
Unpacking payload ...
Collecting package metadata <span class="o">(</span>current_repodata.json<span class="o">)</span>: <span class="k">done</span>
Solving environment: <span class="k">done</span>

<span class="c1">## Package Plan ##</span>

  environment location: /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3

  added / updated specs:
    - <span class="nv">_libgcc_mutex</span><span class="o">==</span><span class="m">0</span>.1<span class="o">=</span>main
    - <span class="nv">asn1crypto</span><span class="o">==</span><span class="m">1</span>.2.0<span class="o">=</span>py37_0
    - ca-certificates<span class="o">==</span><span class="m">2019</span>.10.16<span class="o">=</span><span class="m">0</span>
...
  yaml               pkgs/main/linux-ppc64le::yaml-0.1.7-h1bed415_2
  zlib               pkgs/main/linux-ppc64le::zlib-1.2.11-h7b6447c_3


Preparing transaction: <span class="k">done</span>
Executing transaction: <span class="k">done</span>
installation finished.
Do you wish the installer to initialize Miniconda3
by running conda init? <span class="o">[</span>yes<span class="p">|</span>no<span class="o">]</span>
<span class="o">[</span>no<span class="o">]</span> &gt;&gt;&gt; yes
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/condabin/conda
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/bin/conda
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/bin/conda-env
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/bin/activate
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/bin/deactivate
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/etc/profile.d/conda.sh
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/etc/fish/conf.d/conda.fish
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/shell/condabin/Conda.psm1
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/shell/condabin/conda-hook.ps1
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/lib/python3.7/site-packages/xontrib/conda.xsh
no change     /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3/etc/profile.d/conda.csh
modified      /gpfs/u/home/BMHR/BMHRkmkh/.bashrc

<span class="o">==</span>&gt; For changes to take effect, close and re-open your current shell. &lt;<span class="o">==</span>

If you<span class="s1">&#39;d prefer that conda&#39;</span>s base environment not be activated on startup,
   <span class="nb">set</span> the auto_activate_base parameter to false:

conda config --set auto_activate_base <span class="nb">false</span>

Thank you <span class="k">for</span> installing Miniconda3!
<span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$
<span class="o">[</span>your-id@dcsfen01 ~<span class="o">]</span>$ <span class="nb">source</span> .bashrc
<span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-idh@dcsfen01 ~<span class="o">]</span>$
</pre></div>
</div>
<p>Now you have the base conda installed and activated in your environment.</p>
</section>
<section id="frequently-used-conda-commands">
<h2>Frequently Used conda commands<a class="headerlink" href="#frequently-used-conda-commands" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Display conda information</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda info
</pre></div>
</div>
<ul class="simple">
<li><p>List the available conda environments</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda info --env
</pre></div>
</div>
<ul class="simple">
<li><p>Activate an environment.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate &lt;env name&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Deactivate a current environment</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda deactivate
</pre></div>
</div>
<ul class="simple">
<li><p>List the packages installed in a conda environment</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda list
</pre></div>
</div>
<ul class="simple">
<li><p>List all available packages in the channels</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda search
</pre></div>
</div>
<ul class="simple">
<li><p>Remove a package in a conda environment</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda remove  &lt;package name&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Install a package in a conda environment</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install  &lt;package name&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>Install a pip package in a conda environment</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install  &lt;package name&gt;
</pre></div>
</div>
<p>For more information see Conda cheatsheet at <a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/_downloads/843d9e0198f2a193a3484886fa28163c/conda-cheatsheet.pdf">https://docs.conda.io/projects/conda/en/latest/_downloads/843d9e0198f2a193a3484886fa28163c/conda-cheatsheet.pdf</a></p>
</section>
<section id="create-a-new-conda-environment-for-your-workload">
<h2>Create a new conda environment for your workload<a class="headerlink" href="#create-a-new-conda-environment-for-your-workload" title="Permalink to this heading"></a></h2>
<p>It is strongly recommended that you create a separate environment for your workload than the default base environment which comes with the installation of Anaconda.</p>
<p>For example that you want to create an environment named pytorch-env and install pytorch on to environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n pytorch-env pytorch
</pre></div>
</div>
<p><strong>NOTE:</strong>  you can specify additional packages in the command line.  You can also specify a specific version for the packages.</p>
</section>
<section id="install-wml-ce-a-k-a-powerai">
<span id="install-wmlce"></span><h2>Install WML-CE (a.k.a PowerAI)<a class="headerlink" href="#install-wml-ce-a-k-a-powerai" title="Permalink to this heading"></a></h2>
<p>Watson Machine Learning Community Edition (WML-CE), formerly PowerAI, is a free, enterprise-grade software distribution that combines popular open source deep learning frameworks, efficient AI development tools, and accelerated IBM® Power Systems™ servers to take your deep learning projects to the next level.</p>
<p>For more information, see
<a class="reference external" href="https://developer.ibm.com/linuxonpower/deep-learning-powerai/releases/">https://developer.ibm.com/linuxonpower/deep-learning-powerai/releases/</a></p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>Log in to one of the front end nodes.  For more information see <a class="reference internal" href="aimos-userid.html#how-to-login"><span class="std std-ref">Login to AiMOS</span></a></p></li>
<li><p>Make sure that you set up the proxy before you proceed to the next step.  For how to see <a class="reference internal" href="aimos-env-basics.html#setup-environment"><span class="std std-ref">Initial Environment Setup</span></a>.</p></li>
<li><p>Anaconda is installed and activated. For more information see <a class="reference internal" href="#install-conda"><span class="std std-ref">Install Anaconda</span></a></p></li>
</ul>
<p>Set up ~/.condarc if needed.  If ~/.condarc does not exist, you can run the following command to generate it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">config</span>
</pre></div>
</div>
<p>Below is the example of .condarc file. You need replace <em>your-project</em> with your PROJECT ID and <em>&lt;your-id&gt;</em> with your ID.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>channels:
  - https://public.dhe.ibm.com/ibmdl/export/pub/software/server/ibm-ai/conda
  - powerai
  - defaults
  - conda-forge
</pre></div>
</div>
<p>As a best practice, you should install WML-CE in a new conda environment (i.e. not the base environment).  That would enable you to have different versions of WML-CE.</p>
<p><strong>IMPORTANT:</strong>  You also need to specify the python version since the only valid Python versions with WML CE are Python 3.6 and 3.7.</p>
<p>For more information on how to install WML-CE, see <a class="reference external" href="https://www.ibm.com/support/knowledgecenter/SS5SF7_1.7.0/navigation/wmlce_install.htm">https://www.ibm.com/support/knowledgecenter/SS5SF7_1.7.0/navigation/wmlce_install.htm</a></p>
<p>As an example, here are the steps for creating a new conda environment named <strong>wmlce-1.7.0</strong> with python version 3.7.</p>
<p>For automatically accept the license after the installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">IBM_POWERAI_LICENSE_ACCEPT</span><span class="o">=</span>yes
</pre></div>
</div>
<p>Create a new environment named “wmlce-1.7.0” with python version is set at 3.7.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create --name wmlce-1.7.0 <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7
</pre></div>
</div>
<p>Activate the created conda environment.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda activate wmlce-1.7.0
</pre></div>
</div>
<p>Install WML-CE version 1.7.0 which is the latest version at the time of this writting.</p>
<ul class="simple">
<li><p>To install the <strong>whole powerai GPU packages</strong> in the created conda environment, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install powerai
</pre></div>
</div>
<ul class="simple">
<li><p>To install the <strong>whole powerai GPU packages</strong> version 1.6.2</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install <span class="nv">powerai</span><span class="o">=</span><span class="m">1</span>.6.2
</pre></div>
</div>
<ul class="simple">
<li><p>To install an individual framework, such as <strong>pytorch</strong> or <strong>tensorflow</strong>.</p></li>
</ul>
<p>For complete list of individual framework see <a class="reference external" href="https://www.ibm.com/support/knowledgecenter/SS5SF7_1.7.0/navigation/wmlce_install.htm">https://www.ibm.com/support/knowledgecenter/SS5SF7_1.7.0/navigation/wmlce_install.htm</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install pytorch
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install tensorflow-gpu
</pre></div>
</div>
<ul class="simple">
<li><p>To install powerai CPU packages only in the created conda environment, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install powerai-cpu
</pre></div>
</div>
<ul class="simple">
<li><p>To install RAPIDS packages, run:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install powerai-rapids
</pre></div>
</div>
</section>
<section id="install-open-ce">
<span id="id1"></span><h2>Install Open-CE<a class="headerlink" href="#install-open-ce" title="Permalink to this heading"></a></h2>
<p>Open Cognitive Environment(Open-CE) provides the latest and greatest AI package and framework versions pre-integrated in an easy-to-consume and use Conda environment. The main <a class="reference external" href="https://github.com/open-ce">Open-CE GitHub page</a> focusses on providing feedstock to developers, and groups, such as Open Source Lab (OSL). The Center for Genome Research and Biocomputing (CGRB) at the <a class="reference external" href="https://osuosl.org/services/powerdev/opence">Oregon State University</a> provides precompiled Conda packages <a class="footnote-reference brackets" href="#id7" id="id2">1</a>. This install section are consolidated from both reference below <a class="footnote-reference brackets" href="#id8" id="id3">2</a> <a class="footnote-reference brackets" href="#id9" id="id4">3</a>.</p>
<p>This repository contains a collection of Open-CE files that can be used to create a conda channel. The conda channel will contain packages for every feedstock listed within the Open-CE files. Different variants of Python and CUDA can be specified at build time. Open-CE currently supports the following:</p>
<section id="open-ce-release-1-2-2">
<h3>Open-CE Release 1.2.2<a class="headerlink" href="#open-ce-release-1-2-2" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Release date: 06/16/2021</p></li>
</ul>
</section>
<section id="what-s-new">
<h3>What’s new<a class="headerlink" href="#what-s-new" title="Permalink to this heading"></a></h3>
<p>This is release 1.2.2 of Open Cognitive Environment (Open-CE).
This is bug fix 2 of release 1.2 of Open Cognitive Environment (Open-CE), code named Prairiedog.</p>
<p><strong>Bug Fix Changes</strong></p>
<blockquote>
<div><ul class="simple">
<li><p>libgcc and libstdc++ were pinned to cos6 versions to allow for compilation with GCC 7.2/7.3 #433</p></li>
<li><p>TensorFlow was updated to version 2.4.2</p></li>
<li><p>Dependency pins were loosened for networkx, requests, scipy and werkzeug #439</p></li>
<li><p>Changed PyArrow to build with -O2 optimizations to avoid a compiler error in GCC 7.x</p></li>
<li><p>Add patch to PyArrow to fix handling of decimal types with negative scale in C data import</p></li>
</ul>
</div></blockquote>
</section>
<section id="installing-the-open-ce-repository-and-frameworks">
<h3>Installing the Open-CE Repository and Frameworks<a class="headerlink" href="#installing-the-open-ce-repository-and-frameworks" title="Permalink to this heading"></a></h3>
<p>Setting up the software repository</p>
<p>The Open-CE MLDL packages are distributed as conda packages in an online conda repository. Conda must be configured to give priority to installing packages from this channel.</p>
<p>Add the Open-CE channel to the conda configuration by running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda config --prepend channels https://ftp.osuosl.org/pub/open-ce/current/
</pre></div>
</div>
<p>Creating conda environments (recommended)</p>
<p>With conda, you can create environments that have different versions of Python or packages installed in them. Conda environments are optional but recommended. If not used, packages are installed in the default environment called base, which often has a higher risk of containing conflicting packages or dependencies. Switching between environments is called activating the environment.</p>
<p>The syntax to create and activate a conda environment is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create --name &lt;environment name&gt; <span class="nv">python</span><span class="o">=</span>&lt;python version&gt;
conda activate &lt;environment name&gt;
</pre></div>
</div>
<p>Note: It is recommended that you specify the Python version when creating a new environment. If you do not specify the version, Python 3.7 is installed when any package that requires Python are installed.</p>
<p>The only valid Python versions with Open-CE are Python 3.6, 3.7 and 3.8.</p>
<p>For example, to create an environment named opence_env with Python 3.7:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create --name opence_env <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7
conda activate opence_env
</pre></div>
</div>
<p>For more information on what you can do with conda environment see <a class="reference external" href="https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">https://conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html</a>.</p>
<p>Note: Open-CE should be run as a non-privileged user and not root. The Open-CE components are designed to be usable by normal users, and the pre-installed docker images provide a non-root user by default. Some of the Open-CE components will give warnings or will fail when run as root.
Installing frameworks individually</p>
<p>Install MLDL Frameworks Individually.
The framework packages (Open-CE 1.2.2) include the following versions.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 56%" />
<col style="width: 16%" />
<col style="width: 16%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Package</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>ppc64le</p></th>
<th class="head"><p>x86_64</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tensorflow</p></td>
<td><p>2.4.2</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tensorflow-estimator*</p></td>
<td><p>2.4.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tensorflow-probability</p></td>
<td><p>0.12.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tensorboard</p></td>
<td><p>2.4.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tensorflow-text</p></td>
<td><p>2.4.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tensorflow-model-optimization*</p></td>
<td><p>0.5.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tensorflow-addons</p></td>
<td><p>0.12.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>Tensorflow-datasets</p></td>
<td><p>4.1.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tensorflow-hub</p></td>
<td><p>0.10.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tensorflow-metadata</p></td>
<td><p>0.26.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pytorch</p></td>
<td><p>1.7.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>torchtext</p></td>
<td><p>0.8.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>torchvision</p></td>
<td><p>0.8.2</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pytorch-lightning</p></td>
<td><p>1.1.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyTorch-lightning-bolts</p></td>
<td><p>0.2.5</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>onnx</p></td>
<td><p>1.7</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>onnxruntime*</p></td>
<td><p>1.7.2</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>keras2onnx</p></td>
<td><p>1.7.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>skl2onnx</p></td>
<td><p>0.9.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>tf2onnx</p></td>
<td><p>1.8.5</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>onnxmltools</p></td>
<td><p>1.8.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>onnxconverter-common</p></td>
<td><p>1.8.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>xgboost</p></td>
<td><p>1.3.3</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>transformers</p></td>
<td><p>3.5.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>tokenizers</p></td>
<td><p>0.9.3</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>sentencepiece</p></td>
<td><p>0.1.91</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>spacy</p></td>
<td><p>2.3.4</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>thinc</p></td>
<td><p>7.4.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>dali*</p></td>
<td><p>0.28.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>opencv</p></td>
<td><p>3.4.10</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>horovod</p></td>
<td><p>0.21.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>lightgbm</p></td>
<td><p>3.1.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pyarrow</p></td>
<td><p>3.0.0</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>grpc-cpp</p></td>
<td><p>1.29.1</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>Note, there were type errors in <a class="reference external" href="https://github.com/open-ce/open-ce">original document</a></p>
<p>–  * Tensorflow-estimators -&gt; tensorflow-estimator</p>
<p>–  * Tensorflow-model-optimizations -&gt; tensorflow-model-optimization</p>
<p>–  * Tensorflow-estimators -&gt; tensorflow-estimators</p>
<p>–  * Onnx-runtime  -&gt;  onnx-runtime</p>
<p>–  * Grpc  -&gt; grpc</p>
<p>–  * Dali had some build issues on ppc. Disabled in v1.3 and v1.4, will be renable in v1.5.</p>
<p>With the conda environment activated, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install &lt;package name&gt;
</pre></div>
</div>
</section>
<section id="uninstalling-the-open-ce-mldl-frameworks">
<h3>Uninstalling the Open-CE MLDL frameworks<a class="headerlink" href="#uninstalling-the-open-ce-mldl-frameworks" title="Permalink to this heading"></a></h3>
<p>Find information about uninstalling machine learning and deep learning MLDL frameworks.</p>
<p>The MLDL framework packages can be uninstalled individually, or you can uninstall all of the MLDL packages at the same time.</p>
<p>If the frameworks are installed into a separate conda environment, all of the frameworks can be removed by simply deleting the environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda env remove -n &lt;environment name&gt;
</pre></div>
</div>
<p>Individual frameworks (and any packages that depend on them) can be removed by removing the individual package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda remove &lt;package name&gt;
</pre></div>
</div>
<p>Important: This command removes the specified packages and any packages that depend on any of the specified packages. If you want to skip this dependency checking and remove just the requested packages, add the –force option. However, this may break your environment, so use this option with caution.</p>
</section>
</section>
<section id="install-jupyter-notebook">
<span id="install-jupyter"></span><h2>Install Jupyter notebook<a class="headerlink" href="#install-jupyter-notebook" title="Permalink to this heading"></a></h2>
<p>The <a class="reference external" href="https://jupyter.org/">Jupyter Notebook</a> is an open-source web application.  It allows you to create and execute  notebook documents that contain code, visualizations and  text.  For more information see <a class="reference external" href="https://jupyter.org/">https://jupyter.org/</a></p>
<p>It is recommended to <a class="reference external" href="https://jupyter.org/install.html">install Jupyter notebook</a> in a miniconda environment which includes a minimal Python and conda installation.</p>
<p><strong>Prerequisites</strong></p>
<ul class="simple">
<li><p>You are logging in to one of the front end nodes. For more information see <a class="reference internal" href="aimos-userid.html#how-to-login"><span class="std std-ref">Login to AiMOS</span></a></p></li>
<li><p>Proxy was set up. For how to see <a class="reference internal" href="aimos-env-basics.html#setup-environment"><span class="std std-ref">Initial Environment Setup</span></a>.</p></li>
<li><p>Conda is installed and activated. For more information see <a class="reference internal" href="#install-conda"><span class="std std-ref">Install Anaconda</span></a>.</p></li>
</ul>
<p>You can install Jupyter notebook via conda install or pip install.</p>
<p>If you plan to use the AI framework with your notebook, make sure that you install Jupyter notebook in the conda environment that includes the AI framework.  For example, if you want to use the AI frameworks that are included in the WML-CE, then you need to install Jupyter notebook in the environment that WML-CE was installed.  For more information on how to install WML-CE see ref:<cite>install-wmlce</cite>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge notebook
</pre></div>
</div>
<p>Or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install notebook
</pre></div>
</div>
<p>The example below is to install jupyter notebook on the wmlce-1.7.0 environment where you have installed WML-CE 1.7.0 as above.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 wmlce-1.7.0<span class="o">]</span>$ conda install -c conda-forge notebook
Collecting package metadata <span class="o">(</span>current_repodata.json<span class="o">)</span>: <span class="k">done</span>
Solving environment: <span class="k">done</span>

<span class="c1">## Package Plan ##</span>

  environment location: /gpfs/u/home/BMHR/BMHRkmkh/scratch/miniconda3

  added / updated specs:
    - notebook


The following packages will be downloaded:

    package                    <span class="p">|</span>            build
</pre></div>
</div>
<p>Verify the notebook was installed.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>your-id@dcsfen01 wmlce-1.7.0<span class="o">]</span>$ conda list <span class="p">|</span> grep notebook
notebook                  <span class="m">6</span>.0.3                    py37_0    conda-forge
</pre></div>
</div>
</section>
<section id="start-jupyter-notebook">
<span id="start-jupyter"></span><h2>Start Jupyter Notebook<a class="headerlink" href="#start-jupyter-notebook" title="Permalink to this heading"></a></h2>
<p><strong>Prerequisites:</strong></p>
<ul class="simple">
<li><p>You are logging in to one of the front end nodes. For more information see <a class="reference internal" href="aimos-userid.html#how-to-login"><span class="std std-ref">Login to AiMOS</span></a></p></li>
<li><p>Conda was installed and activated. For more information see <a class="reference internal" href="#install-conda"><span class="std std-ref">Install Anaconda</span></a>.</p></li>
<li><p>Jupyter notebook was installed. For how to  see <a class="reference internal" href="#install-jupyter"><span class="std std-ref">Install Jupyter notebook</span></a>.</p></li>
</ul>
<section id="allocate-a-compute-node">
<h3>Allocate a compute node<a class="headerlink" href="#allocate-a-compute-node" title="Permalink to this heading"></a></h3>
<p>For example, allocate a compute node for 30 minutes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>salloc -N <span class="m">1</span> --gres<span class="o">=</span>gpu:1 -t <span class="m">30</span>
</pre></div>
</div>
<p>After the command returns, you can run squeue to find the allocated node.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>squeue
       JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST<span class="o">(</span>REASON<span class="o">)</span>
      <span class="m">387824</span>       dcs     bash BMHRkmkh  R       <span class="m">1</span>:29      <span class="m">1</span> dcs123
</pre></div>
</div>
</section>
<section id="start-jupyter-notebook-on-the-allocated-compute-node">
<h3>Start Jupyter Notebook on the allocated compute node<a class="headerlink" href="#start-jupyter-notebook-on-the-allocated-compute-node" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>SSH to the compute node</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>BMHRkmkh@dcsfen01 ~<span class="o">]</span>$ ssh dcs123
Warning: Permanently added <span class="s1">&#39;dcs123,172.31.236.123&#39;</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
</pre></div>
</div>
<ul class="simple">
<li><p>Activate to the conda environment that is appropriated for your notebook.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span> <span class="o">[</span>BMHRkmkh@dcs123 ~<span class="o">]</span>$ conda activate wmlce-1.7.0
<span class="o">(</span>wmlce-1.7.0<span class="o">)</span> <span class="o">[</span>BMHRkmkh@dcs123 ~<span class="o">]</span>$
</pre></div>
</div>
<ul class="simple">
<li><p>Start Jupyter Notebook and set the notebook directory to the barn directory.  <strong>NOTE:</strong> you need to specify the absolute path for the notebook-dir.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>wmlce-1.7.0<span class="o">)</span> <span class="o">[</span>BMHRkmkh@dcs123 ~<span class="o">]</span>$ jupyter notebook --ip<span class="o">=</span><span class="m">0</span>.0.0.0 --no-browser --notebook-dir<span class="o">=</span>/gpfs/u/home/BMHR/BMHRkmkh/barn
<span class="o">[</span>I <span class="m">10</span>:37:36.643 NotebookApp<span class="o">]</span> Serving notebooks from <span class="nb">local</span> directory: /gpfs/u/home/BMHR/BMHRkmkh/barn
<span class="o">[</span>I <span class="m">10</span>:37:36.643 NotebookApp<span class="o">]</span> The Jupyter Notebook is running at:
</pre></div>
</div>
</section>
</section>
<section id="display-the-webgui-for-a-jupyter-notebook-via-tunneling">
<h2>Display the WebGUI for a Jupyter notebook via Tunneling<a class="headerlink" href="#display-the-webgui-for-a-jupyter-notebook-via-tunneling" title="Permalink to this heading"></a></h2>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h3>
<p>Jupyter notebook was started on the allocated compute node, such as dcs123. For how to see <a class="reference internal" href="#start-jupyter"><span class="std std-ref">Start Jupyter Notebook</span></a>.</p>
</section>
<section id="ssh-tunnelling-on-a-linux-or-mac-osx-node">
<h3>SSH tunnelling on a Linux or MAC OSX node<a class="headerlink" href="#ssh-tunnelling-on-a-linux-or-mac-osx-node" title="Permalink to this heading"></a></h3>
<p>Start the ssh session to one of the landing pad nodes and map the port 8888 from dcs123 to port 8888 on the local host.  For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>id@kvt-rhel ~<span class="o">]</span>$ ssh -L8888:dcs123:8888 BMHRkmkh@blp01.ccni.rpi.edu
</pre></div>
</div>
<p>Go to your browser, enter the following to display the jupyter notebook running on the compute node dcs123.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>http://localhost:8888
</pre></div>
</div>
<p>You should see the jupyter notebook after you enter the token at the login prompt.</p>
<figure class="align-default">
<img alt="_images/jupyter-l.png" src="_images/jupyter-l.png" />
</figure>
</section>
<section id="ssh-tunneling-via-putty-on-windows">
<h3>SSH tunneling via PUTTY on Windows<a class="headerlink" href="#ssh-tunneling-via-putty-on-windows" title="Permalink to this heading"></a></h3>
<p>Go to the “Change Setting…” of the current putty session, then go to section “Connection-&gt;SSH-&gt;Tunnels”.</p>
<figure class="align-default">
<img alt="_images/putty2.png" src="_images/putty2.png" />
</figure>
<p>Enter the jupyter notebok URL on the compute node and click <strong>Add</strong> button to add.</p>
<figure class="align-default">
<img alt="_images/putty-tunnel.png" src="_images/putty-tunnel.png" />
</figure>
<p>Click “Apply” button to apply the change the  putty session.</p>
<p><strong>NOTE:</strong> this is a temporary change setting to the putty session.  Once you terminate the putty session, the change will go away.</p>
<p>Now go to your browser and enter the following to tunnel to the jupyter notebook running on the compute node.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>http://localhost:8888
</pre></div>
</div>
<p>You should see the jupyter notebook after you enter the token at the login prompt.</p>
<figure class="align-default">
<img alt="_images/jupyter-w.png" src="_images/jupyter-w.png" />
</figure>
</section>
</section>
<section id="remote-port-forwarding-via-ssh-tunneling">
<h2>Remote Port Forwarding via SSH Tunneling<a class="headerlink" href="#remote-port-forwarding-via-ssh-tunneling" title="Permalink to this heading"></a></h2>
<p>Let’s say that you have  an application running on your local environment to which a process running on AiMOS needs to send a message. In order to accomplish that, you need to  use SSH remote port forwarding and  <a class="reference external" href="https://www.redhat.com/sysadmin/getting-started-socat">socat</a> command.</p>
<p>For demonstration purpose, we are going to use the sample python code “echo-server.py” and “echo-client.py” provided at this <a class="reference external" href="https://realpython.com/python-sockets">link</a></p>
<ul>
<li><p>On the local system</p>
<ul>
<li><p>Run “echo-server.py”.</p></li>
<li><p>Run the ssh remote port forwarding command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -T -N -R :65432:localhost:65432  &lt;your user ID&gt;@blp01.ccni.rpi.edu
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>On the allocated compute node.</p>
<ul>
<li><p>Run <a class="reference external" href="https://www.redhat.com/sysadmin/getting-started-socat">socat</a>  command to forward data from port 65432 to blp01 at port 65432, such as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>socat tcp-listen:65432,reuseaddr,fork tcp:blp01:65432
</pre></div>
</div>
</li>
<li><p>Run the “echo_client.py”.</p></li>
</ul>
</li>
</ul>
<dl class="footnote brackets">
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p><a class="reference external" href="https://openpowerfoundation.org/open-cognitive-environment-open-ce-a-valuable-tool-for-ai-researchers/">https://openpowerfoundation.org/open-cognitive-environment-open-ce-a-valuable-tool-for-ai-researchers/</a></p>
</dd>
<dt class="label" id="id8"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p><a class="reference external" href="https://github.com/open-ce/open">https://github.com/open-ce/open</a>-ce#</p>
</dd>
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p><a class="reference external" href="https://osuosl.org/services/powerdev/opence/">https://osuosl.org/services/powerdev/opence/</a></p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="aimos-env-basics.html" class="btn btn-neutral float-left" title="AiMOS Environment Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="aimos-submit-job.html" class="btn btn-neutral float-right" title="Submit jobs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, AiMOS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>